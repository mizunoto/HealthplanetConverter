# Healthplanet Converter

## はじめに

### 何をするアプリなのか

TANITAの提供するアプリhealthplanetから体重と体脂肪の情報を取得し、google ヘルスコネクトに入力するアプリです。

### なぜこのアプリを作ったか

以前からTANITAのHealthplanetとGoogle
GoogleFitの連携が個々人で外部アプリなどを介さなければいけないことに不便を感じており、一念発起していざ自分も実行しようと思ったところ、GoogleFitがサービス終了するため新規APIの発行を終了しており、新しくヘルコネクトに情報を入力することにしたためです。

## 動作環境

Android 14以降<br>
自身の端末では問題なく動いてますが他の端末で動作するかは未検証です。<br>
情報をいただけると幸いです。

## 想定使用者

アプリ自体は最低限の機能しか持たない、いわばα版のため、ある程度webAPI等の知識を持つか、自身で調べられる人が対象になります。

## 使い方

### HealthplanetのAPIを取得する

参考：[GAS を使って TANITA HealthPlanet のデータを GoogleFit に自動連携してみた - Qiita](https://qiita.com/potstickers/items/8fa8dce3e31efcde078a#healthplanet-api-%E3%81%AE%E6%BA%96%E5%82%99)<br>
上の指示に従えばAPIを取れるはずです。GASやGoogleFitは無視してかまいません。

### Client ID、Client secretの保存

情報は正確に入力する必要があります。<br>
google レンズなどで取得した場合、l(小文字L)とI(大文字i)
が混同されたりする場合があるので注意が必要です。(経験談)<br>
入力したら入力欄の下にある保存ボタンを押してください。<br>
更新は何度でも可能なので間違っていても気にせず押下してかまいません。

### codeの取得

API情報が保存出来たら下部メニュー右から2番目にある「Token取得」を選んでください。<br>
最上部にある「codeを取得する」を選ぶとブラウザが起動し、アクセス許可画面が表示されるはずです。<br>
表示されなければClient IDが間違っている可能性があるのでご確認ください。<br>
アクセスを許可をタップし、表示されたコードをコピーしてアプリに戻ります。<br>
入力欄を1、2度タップすればクリップボードから自動的に入力欄にクリップボードの内容が貼り付けられます。<br>
正しいコードが入力されているのを確認し、送信ボタンを押してください。<br>
Client secretにも問題がなければTokenが取得され、保存されるはずです。<br>
なお、コード取得からToken取得の送信ボタン押下までは10分以内に行う必要があります。

### 身体情報の取得

- 通常読み込み<br>
  メニュー一番右の読み込みから読み込みボタンを押すことで新しく入力されたデータを取得します。<br>
  前回の起動がない場合は現在から遡って30日分、それ以外は更新がある場合のみ更新します。
- 日付指定読み込み<br>
  日付を指定して90日間隔で読み込みます。<br>
  HealthplanetのAPI呼び出し制限が1時間に60回なのでそれを超える日数を指定した場合はエラーが発生する可能性があります。<br>
  当方では試していないので長期間を指定する場合はお気を付けください。

## アプリをアンインストールした場合について

アプリに保存されるデータはAPIの設定や再取得が容易なtokenなど単純な情報しかありません。<br>
ですのでヘルスコネクトに入力された情報を完全に消去するにはアンインストール前にヘルスコネクトから情報の削除を行う必要があります。<br>
ただ、同じアプリなので再インストールすれば情報を消すことは可能のはずです。
